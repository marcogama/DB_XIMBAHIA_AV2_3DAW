<!DOCTYPE html>
<html lang = "pt-br">
    <!--MARCO ANTONIO RIBEIRO GAMA
	    MAT 1810478300006-->
    <head>
	    <meta charset = "UTF-8">
		<title>ALTERAR PRODUTO JS </title>
		<script>
		        function altera_Produto(str) {
                                
                                if (str.length > 0) {
                                        const xmlhttp = new XMLHttpRequest();
                                        xmlhttp.onreadystatechange = function() {
                                                                            if (this.readyState == 4 && this.status == 200) {
                                                                                        document.getElementById("aqui").innerHTML = this.responseText;
                                                                            }
                                                                    }
                                                                    xmlhttp.open("GET", "alterar_Produto_PHP_AV2.php?p="+str, true);
                                                                    xmlhttp.send();
                                } else {
                                        document.getElementById("aqui").innerHTML = "";
                                }
                }
				
				function confirma_Altera(){
				        
						let NOME, NOME_FABR, CODBAR, CATEG, TIPO, PRECO_VENDA, QUANT_EST, PESO, IMG, DT_INC, AT1, AT2;
                        let ALPHA = /([A-Z]|.)/gi, DIGIT =/([0-9]|,)/g, DATE = /([0-9]|\/|.|-)/g;
						CODBAR = document.getElementById("codbar");
                        if((NOME = document.getElementById("nome") == "") || (NOME = document.getElementById("nome") !=
                            NOME.match(ALPHA))){
                            document.getElementById("mensagem").innerHTML = "PREENCHA O NOME, APENAS COM LETRAS";
                        }else{
                            if((NOME_FABR = document.getElementById("n_Fabr") == "") || (NOME_FABR = 
                                document.getElementById("n_Fabr") != NOME_FABR.match(ALPHA))){
                                document.getElementById("mensagem").innerHTML = "PREENCHA O NOME DO FABRICANTE, COM LETRAS";
                            }else{
                                if((CATEG = document.getElementById("cat") == "") || (CATEG = 
                                    document.getElementById("cat") != CATEG.match(DIGIT))){
                                    document.getElementById("mensagem").innerHTML = "SELECIONE UMA CATEGORIA";
                                }else{
                                    if((TIPO = document.getElementById("tipo") == "") || (TIPO = 
                                        document.getElementById("tipo") != TIPO.match(DIGIT))){
                                        document.getElementById("mensagem").innerHTML = "SELECIONE UM TIPO";
                                    }else{
                                        if((PRECO_VENDA = document.getElementById("prec_V") == "") || (PRECO_VENDA = 
                                            document.getElementById("prec_V") != PRECO_VENDA.match(DIGIT))){
                                            document.getElementById("mensagem").innerHTML = "DIGITE O PREÃ‡O, 00,00";
                                        }else{
                                            if((QUANT_EST = document.getElementById("quant_Est") == "") || (QUANT_EST = 
                                                document.getElementById("quant_Est") != QUANT_EST.match(DIGIT))){
                                                document.getElementById("mensagem").innerHTML = "DIGITE A QUANTIDADE EM ESTOQUE";
                                            }else{
                                                if((PESO = document.getElementById("peso") == "") || (PESO = 
                                                    document.getElementById("peso") != PESO.match(DIGIT))){
                                                    document.getElementById("mensagem").innerHTML = "DIGITE O PESO, 00,00";
                                                }else{
                                                    if(IMG = document.getElementById("img") == ""){
                                                        document.getElementById("mensagem").innerHTML = "DIGITE O NOME DO ARQUIVO JPG";
                                                    }else{
                                                        if((DT_INC = document.getElementById("dt_Inc") == "") || (DT_INC = 
                                                            document.getElementById("dt_Inc") != DT_INC.match(DATE))){
                                                            document.getElementById("mensagem").innerHTML = "SELECIONE A DATA";
                                                        }else{
                                                            if((AT1 = document.getElementById("at1") == null) && (AT2 =
                                                                document.getElementById("at2") == null)){
                                                                document.getElementById("mensagem").innerHTML = "SELECIONE ATIVO OU NAO-ATIVO";
                                                            }else{
                                                                const xmlhttp = new XMLHttpRequest();
                                                                xmlhttp.onreadystatechange = function() {
                                                                                                if (this.readyState == 4 && this.status == 200) {
                                                                                                            document.getElementById("aqui").innerHTML = 
                                                                                                            this.responseText;
                                                                                                }
                                                                                            }
                                                                xmlhttp.open("GET","listar_Produto_PHP_AV2.php?p="+NOME"n_f="+NOME_FABR"c="+CATEG"t="+TIPO
																             "p_v="+PRECO_VENDA"q_e="+QUANT_EST"p="+PESO"i="+IMG"d="+DT_INC"c_b="+CODBAR
																			 "at_1="+AT1"at_2="+AT2, true);
                                                                xmlhttp.send();
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                
				}
		</script>
	</head>
	<body>
	    <form action = "" onsubmit = "confirma_Altera()">
		    <fieldset>
			        <legend>Alterar Produto</legend> 
			        <label for = "altera">Digite o codigo de barras:</label><br>
					<input type = "text" name = "altera" id = "codbar" onchange = "altera_Produto(this.value)">
			</fieldset>
			<p id = "aqui"></p>
		</form>
	</body>
</html>